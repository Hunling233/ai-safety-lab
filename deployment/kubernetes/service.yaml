# AI Safety Lab - Kubernetes Services
apiVersion: v1
kind: Service
metadata:
  name: ai-safety-backend-service
  namespace: unicc-aisafety
  labels:
    app: ai-safety-backend
spec:
  selector:
    app: ai-safety-backend
  ports:
  - name: http
    port: 8000
    targetPort: 8000
    protocol: TCP
  type: ClusterIP

---
apiVersion: v1
kind: Service
metadata:
  name: ai-safety-frontend-service
  namespace: unicc-aisafety
  labels:
    app: ai-safety-frontend
spec:
  selector:
    app: ai-safety-frontend
  ports:
  - name: streamlit
    port: 8501
    targetPort: 8501
    protocol: TCP
  type: ClusterIP

---
# LoadBalancer服务（用于外部访问）
apiVersion: v1
kind: Service
metadata:
  name: ai-safety-external-service
  namespace: unicc-aisafety
  labels:
    app: ai-safety
    tier: external
spec:
  selector:
    app: ai-safety-frontend
  ports:
  - name: web
    port: 80
    targetPort: 8501
    protocol: TCP
  type: LoadBalancer
  loadBalancerSourceRanges:
  - "10.0.0.0/8"  # 限制访问IP范围（根据UNICC网络配置调整）